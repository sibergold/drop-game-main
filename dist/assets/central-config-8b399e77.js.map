{"version":3,"file":"central-config-8b399e77.js","sources":["../../src/central-config.ts"],"sourcesContent":["// Central OAuth Configuration\r\n// This file contains the centralized settings for streamlined OAuth\r\n\r\nexport const CENTRAL_OAUTH_CONFIG = {\r\n\t// Replace this with your actual centralized Kick application Client ID\r\n\t// This should be a single application that all streamers will use\r\n\tCLIENT_ID: import.meta.env.VITE_CENTRAL_CLIENT_ID || import.meta.env.CENTRAL_CLIENT_ID || 'YOUR_CENTRAL_CLIENT_ID_HERE',\r\n\t\r\n\t// OAuth settings\r\n\tOAUTH_SETTINGS: {\r\n\t\tresponse_type: 'code', // Using authorization code flow with PKCE\r\n\t\tscope: 'chat:read chat:write user:read channel:read',\r\n\t\tauthorize_url: import.meta.env.VITE_KICK_OAUTH_BASE_URL || 'https://id.kick.com/oauth/authorize',\r\n\t\ttoken_url: import.meta.env.VITE_KICK_TOKEN_URL || 'https://id.kick.com/oauth/token',\r\n\t\tapi_base: import.meta.env.VITE_KICK_API_BASE_URL || 'https://kick.com/api/v2',\r\n\t\tproxy_url: (() => {\r\n\t\t\t// Check if we're running on localhost (development environment)\r\n\t\t\tconst isLocalhost = window.location.hostname === 'localhost';\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// Use local proxy server for localhost development\r\n\t\t\t\treturn import.meta.env.VITE_OAUTH_PROXY_URL_DEV || 'http://localhost:3001';\r\n\t\t\t} else {\r\n\t\t\t\t// Use Netlify functions for deployed environment\r\n\t\t\t\treturn import.meta.env.VITE_OAUTH_PROXY_URL_PROD || 'https://drop-game-proxy.onrender.com'\r\n\t\t\t}\r\n\t\t})()\r\n\t},\r\n\t\r\n\t// Default game settings that streamers can override\r\n\tDEFAULT_GAME_SETTINGS: {\r\n\t\tgravity: 400,\r\n\t\tgravity_chute: 60,\r\n\t\tmax_velocity: 600,\r\n\t\twait: 60\r\n\t},\r\n\t\r\n\t// UI Configuration\r\n\tUI_CONFIG: {\r\n\t\ttheme: {\r\n\t\t\tprimary_color: '#00ff88',\r\n\t\t\tsecondary_color: '#9146ff',\r\n\t\t\tgradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\r\n\t\t},\r\n\t\tmessages: {\r\n\t\t\tsuccess: '‚úÖ Authorization successful! Your overlay is ready.',\r\n\t\t\terror_no_client_id: '‚ö†Ô∏è Central Client ID not configured. Please contact the developer.',\r\n\t\t\terror_auth_failed: 'Authorization failed. Please try again.',\r\n\t\t\terror_no_chatroom: 'No chatroom found for this channel. Make sure you have streaming permissions.',\r\n\t\t\tloading: 'üîÑ Connecting to Kick...',\r\n\t\t\tcopied: '‚úÖ Copied!'\r\n\t\t}\r\n\t},\r\n\t\r\n\t// OBS Integration settings\r\n\tOBS_CONFIG: {\r\n\t\tdefault_width: 1920,\r\n\t\tdefault_height: 1080,\r\n\t\tsource_name: 'Kick Drop Game',\r\n\t\tdeep_link_protocol: 'obs://'\r\n\t}\r\n};\r\n\r\n// PKCE helper functions\r\nfunction generateRandomString(length: number): string {\r\n\tconst charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~';\r\n\tlet result = '';\r\n\tfor (let i = 0; i < length; i++) {\r\n\t\tresult += charset.charAt(Math.floor(Math.random() * charset.length));\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nasync function sha256(plain: string): Promise<ArrayBuffer> {\r\n\tconst encoder = new TextEncoder();\r\n\tconst data = encoder.encode(plain);\r\n\treturn await crypto.subtle.digest('SHA-256', data);\r\n}\r\n\r\nfunction base64URLEncode(buffer: ArrayBuffer): string {\r\n\tconst bytes = new Uint8Array(buffer);\r\n\tlet binary = '';\r\n\tfor (let i = 0; i < bytes.byteLength; i++) {\r\n\t\tbinary += String.fromCharCode(bytes[i]);\r\n\t}\r\n\treturn btoa(binary)\r\n\t\t.replace(/\\+/g, '-')\r\n\t\t.replace(/\\//g, '_')\r\n\t\t.replace(/=/g, '');\r\n}\r\n\r\nexport async function generatePKCE(): Promise<{ codeVerifier: string; codeChallenge: string }> {\r\n\tconst codeVerifier = generateRandomString(128);\r\n\tconst hashed = await sha256(codeVerifier);\r\n\tconst codeChallenge = base64URLEncode(hashed);\r\n\treturn { codeVerifier, codeChallenge };\r\n}\r\n\r\n// Helper function to check if central config is properly set up\r\nexport function isCentralConfigValid(): boolean {\r\n\treturn CENTRAL_OAUTH_CONFIG.CLIENT_ID !== 'YOUR_CENTRAL_CLIENT_ID_HERE' &&\r\n\t\t   CENTRAL_OAUTH_CONFIG.CLIENT_ID.length > 0;\r\n}\r\n\r\n// Helper function to build OAuth URL with PKCE\r\nexport async function buildCentralOAuthUrl(redirectUri: string): Promise<string> {\r\n\tif (!isCentralConfigValid()) {\r\n\t\tthrow new Error('Central Client ID not configured');\r\n\t}\r\n\r\n\t// Generate PKCE parameters\r\n\tconst { codeVerifier, codeChallenge } = await generatePKCE();\r\n\r\n\t// Store code verifier in session storage for later use\r\n\tsessionStorage.setItem('kick_oauth_code_verifier', codeVerifier);\r\n\r\n\t// Generate state parameter for security\r\n\tconst state = generateRandomString(32);\r\n\tsessionStorage.setItem('kick_oauth_state', state);\r\n\r\n\tconst params = new URLSearchParams({\r\n\t\tclient_id: CENTRAL_OAUTH_CONFIG.CLIENT_ID,\r\n\t\tredirect_uri: redirectUri,\r\n\t\tresponse_type: CENTRAL_OAUTH_CONFIG.OAUTH_SETTINGS.response_type,\r\n\t\tscope: CENTRAL_OAUTH_CONFIG.OAUTH_SETTINGS.scope,\r\n\t\tcode_challenge: codeChallenge,\r\n\t\tcode_challenge_method: 'S256',\r\n\t\tstate: state\r\n\t});\r\n\r\n\treturn `${CENTRAL_OAUTH_CONFIG.OAUTH_SETTINGS.authorize_url}?${params.toString()}`;\r\n}\r\n\r\n// Helper function to exchange authorization code for access token via proxy\r\nexport async function exchangeCodeForToken(code: string, redirectUri: string): Promise<string> {\r\n\tconsole.log('üîÑ Starting token exchange via proxy...');\r\n\tconsole.log('Code:', code);\r\n\tconsole.log('Redirect URI:', redirectUri);\r\n\r\n\tconst codeVerifier = sessionStorage.getItem('kick_oauth_code_verifier');\r\n\tconsole.log('Code verifier found:', !!codeVerifier);\r\n\r\n\tif (!codeVerifier) {\r\n\t\tthrow new Error('Code verifier not found in session storage');\r\n\t}\r\n\r\n\tconst requestBody = {\r\n\t\tcode: code,\r\n\t\tredirect_uri: redirectUri,\r\n\t\tcode_verifier: codeVerifier\r\n\t};\r\n\r\n\tconst proxyEndpoint = `${CENTRAL_OAUTH_CONFIG.OAUTH_SETTINGS.proxy_url}/oauth/exchange`\r\n\r\n\tconsole.log('Proxy request body:', requestBody);\r\n\tconsole.log('Proxy endpoint:', proxyEndpoint);\r\n\r\n\tconst response = await fetch(proxyEndpoint, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody: JSON.stringify(requestBody)\r\n\t});\r\n\r\n\tconsole.log('Proxy response status:', response.status);\r\n\r\n\tif (!response.ok) {\r\n\t\tconst errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\r\n\t\tconsole.error('Proxy token exchange error:', errorData);\r\n\t\tthrow new Error(`Token exchange failed: ${response.status} - ${errorData.error || 'Unknown error'}`);\r\n\t}\r\n\r\n\tconst data = await response.json();\r\n\tconsole.log('Token exchange successful via proxy');\r\n\r\n\t// Clean up session storage\r\n\tsessionStorage.removeItem('kick_oauth_code_verifier');\r\n\tsessionStorage.removeItem('kick_oauth_state');\r\n\r\n\treturn data.access_token;\r\n}\r\n\r\n\r\n\r\n// Helper function to get user info from Kick API\r\nexport async function fetchKickUserInfo(accessToken: string): Promise<any> {\r\n\ttry {\r\n\t\tconsole.log('üîÑ Fetching user info from Kick API...');\r\n\t\tconsole.log('Access token:', accessToken ? 'YES' : 'NO');\r\n\r\n\t\tconst isLocalhost = window.location.hostname === 'localhost';\r\n\r\n\t\tif (!isLocalhost) {\r\n\t\t\t// Production: Render proxy fonksiyonu √ºzerinden fetch\r\n\t\t\tconst response = await fetch('https://drop-game-proxy.onrender.com/get-kick-user', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\tbody: JSON.stringify({ access_token: accessToken })\r\n\t\t\t});\r\n\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tconst errorText = await response.text();\r\n\t\t\t\tconsole.error('Render get-kick-user error:', errorText);\r\n\t\t\t\tthrow new Error(`get-kick-user failed: ${response.status} - ${errorText}`);\r\n\t\t\t}\r\n\r\n\t\t\tconst userData = await response.json();\r\n\t\t\tconsole.log('User data received from Render function:', userData);\r\n\t\t\treturn userData;\r\n\t\t}\r\n\r\n\t\t// Local: Doƒürudan Kick API'ye fetch (eski davranƒ±≈ü)\r\n\t\t// Try multiple API endpoints as Kick API structure might vary\r\n\t\tconst endpoints = [\r\n\t\t\t'https://api.kick.com/public/v1/users', // New official API\r\n\t\t\t`${CENTRAL_OAUTH_CONFIG.OAUTH_SETTINGS.api_base}/user`,\r\n\t\t\t'https://kick.com/api/v1/user',\r\n\t\t\t'https://kick.com/api/v2/user/me',\r\n\t\t\t'https://kick.com/api/v1/user/me'\r\n\t\t];\r\n\r\n\t\tlet lastError: Error | null = null;\r\n\r\n\t\tfor (const endpoint of endpoints) {\r\n\t\t\ttry {\r\n\t\t\t\tconsole.log('Trying API endpoint:', endpoint);\r\n\r\n\t\t\t\tconst response = await fetch(endpoint, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Authorization': `Bearer ${accessToken}`,\r\n\t\t\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconsole.log(`API response status for ${endpoint}:`, response.status);\r\n\t\t\t\tconsole.log('API response headers:', Object.fromEntries(response.headers.entries()));\r\n\r\n\t\t\t\tif (!response.ok) {\r\n\t\t\t\t\tconst errorText = await response.text();\r\n\t\t\t\t\tconsole.error(`API error response from ${endpoint}:`, errorText);\r\n\t\t\t\t\tlastError = new Error(`API request failed: ${response.status} - ${errorText}`);\r\n\t\t\t\t\tcontinue; // Try next endpoint\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if response is actually JSON\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tconsole.log('Response content-type:', contentType);\r\n\r\n\t\t\t\tif (!contentType || !contentType.includes('application/json')) {\r\n\t\t\t\t\tconst responseText = await response.text();\r\n\t\t\t\t\tconsole.error(`Non-JSON response from ${endpoint}:`, responseText.substring(0, 200));\r\n\t\t\t\t\tlastError = new Error(`Expected JSON response but got: ${contentType}. Response: ${responseText.substring(0, 200)}`);\r\n\t\t\t\t\tcontinue; // Try next endpoint\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst userData = await response.json();\r\n\t\t\t\tconsole.log('User data received from', endpoint, ':', userData);\r\n\r\n\t\t\t\t// Handle new API format vs old API format\r\n\t\t\t\tif (endpoint.includes('api.kick.com/public/v1/users')) {\r\n\t\t\t\t\t// New API returns data in array format\r\n\t\t\t\t\tif (userData.data && Array.isArray(userData.data) && userData.data.length > 0) {\r\n\t\t\t\t\t\tconst user = userData.data[0];\r\n\t\t\t\t\t\tconsole.log('üîÑ Getting chatroom ID for user:', user.name);\r\n\r\n\t\t\t\t\t\t// Get chatroom ID from old API\r\n\t\t\t\t\t\tlet chatroomId = null;\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconst channelResponse = await fetch(`https://kick.com/api/v1/channels/${user.name}`, {\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif (channelResponse.ok) {\r\n\t\t\t\t\t\t\t\tconst channelData = await channelResponse.json();\r\n\t\t\t\t\t\t\t\tchatroomId = channelData.chatroom?.id;\r\n\t\t\t\t\t\t\t\tconsole.log('Chatroom ID found:', chatroomId);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\tconsole.warn('Could not get chatroom ID:', error);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Convert to old format for compatibility\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tid: user.user_id,\r\n\t\t\t\t\t\t\tusername: user.name,\r\n\t\t\t\t\t\t\temail: user.email,\r\n\t\t\t\t\t\t\tprofile_picture: user.profile_picture,\r\n\t\t\t\t\t\t\tchatroom: { id: chatroomId }\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn userData;\r\n\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(`Error with endpoint ${endpoint}:`, error);\r\n\t\t\t\tlastError = error instanceof Error ? error : new Error(String(error));\r\n\t\t\t\tcontinue; // Try next endpoint\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If we get here, all endpoints failed\r\n\t\tthrow lastError || new Error('All API endpoints failed');\r\n\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to fetch user info:', error);\r\n\t\tthrow error;\r\n\t}\r\n}"],"names":["CENTRAL_OAUTH_CONFIG","generateRandomString","length","charset","result","i","sha256","plain","data","base64URLEncode","buffer","bytes","binary","generatePKCE","codeVerifier","hashed","codeChallenge","isCentralConfigValid","buildCentralOAuthUrl","redirectUri","state","params","exchangeCodeForToken","code","requestBody","proxyEndpoint","response","errorData","fetchKickUserInfo","accessToken","errorText","userData","endpoints","lastError","endpoint","contentType","responseText","user","chatroomId","channelResponse","error"],"mappings":"AAGO,MAAMA,EAAuB,CAGnC,UAAW,6BAGX,eAAgB,CACf,cAAe,OACf,MAAO,8CACP,cAAe,sCACf,UAAW,kCACX,SAAU,0BACV,WAAY,IAES,OAAO,SAAS,WAAa,YAIzC,wBAGA,wCAEN,CACJ,EAGA,sBAAuB,CACtB,QAAS,IACT,cAAe,GACf,aAAc,IACd,KAAM,EACP,EAGA,UAAW,CACV,MAAO,CACN,cAAe,UACf,gBAAiB,UACjB,SAAU,mDACX,EACA,SAAU,CACT,QAAS,qDACT,mBAAoB,qEACpB,kBAAmB,0CACnB,kBAAmB,gFACnB,QAAS,2BACT,OAAQ,WACT,CACD,EAGA,WAAY,CACX,cAAe,KACf,eAAgB,KAChB,YAAa,iBACb,mBAAoB,QACrB,CACD,EAGA,SAASC,EAAqBC,EAAwB,CACrD,MAAMC,EAAU,qEAChB,IAAIC,EAAS,GACb,QAASC,EAAI,EAAGA,EAAIH,EAAQG,IACjBD,GAAAD,EAAQ,OAAO,KAAK,MAAM,KAAK,SAAWA,EAAQ,MAAM,CAAC,EAE7D,OAAAC,CACR,CAEA,eAAeE,EAAOC,EAAqC,CAEpD,MAAAC,EADU,IAAI,cACC,OAAOD,CAAK,EACjC,OAAO,MAAM,OAAO,OAAO,OAAO,UAAWC,CAAI,CAClD,CAEA,SAASC,EAAgBC,EAA6B,CAC/C,MAAAC,EAAQ,IAAI,WAAWD,CAAM,EACnC,IAAIE,EAAS,GACb,QAASP,EAAI,EAAGA,EAAIM,EAAM,WAAYN,IACrCO,GAAU,OAAO,aAAaD,EAAMN,CAAC,CAAC,EAEvC,OAAO,KAAKO,CAAM,EAChB,QAAQ,MAAO,GAAG,EAClB,QAAQ,MAAO,GAAG,EAClB,QAAQ,KAAM,EAAE,CACnB,CAEA,eAAsBC,GAAyE,CACxF,MAAAC,EAAeb,EAAqB,GAAG,EACvCc,EAAS,MAAMT,EAAOQ,CAAY,EAClCE,EAAgBP,EAAgBM,CAAM,EACrC,MAAA,CAAE,aAAAD,EAAc,cAAAE,EACxB,CAGO,SAASC,GAAgC,CAC/C,OAAOjB,EAAqB,YAAc,+BACtCA,EAAqB,UAAU,OAAS,CAC7C,CAGA,eAAsBkB,EAAqBC,EAAsC,CAC5E,GAAA,CAACF,IACE,MAAA,IAAI,MAAM,kCAAkC,EAInD,KAAM,CAAE,aAAAH,EAAc,cAAAE,GAAkB,MAAMH,EAAa,EAG5C,eAAA,QAAQ,2BAA4BC,CAAY,EAGzD,MAAAM,EAAQnB,EAAqB,EAAE,EACtB,eAAA,QAAQ,mBAAoBmB,CAAK,EAE1C,MAAAC,EAAS,IAAI,gBAAgB,CAClC,UAAWrB,EAAqB,UAChC,aAAcmB,EACd,cAAenB,EAAqB,eAAe,cACnD,MAAOA,EAAqB,eAAe,MAC3C,eAAgBgB,EAChB,sBAAuB,OACvB,MAAAI,CAAA,CACA,EAED,MAAO,GAAGpB,EAAqB,eAAe,aAAa,IAAIqB,EAAO,SAAU,CAAA,EACjF,CAGsB,eAAAC,EAAqBC,EAAcJ,EAAsC,CAC9F,QAAQ,IAAI,yCAAyC,EAC7C,QAAA,IAAI,QAASI,CAAI,EACjB,QAAA,IAAI,gBAAiBJ,CAAW,EAElC,MAAAL,EAAe,eAAe,QAAQ,0BAA0B,EAGtE,GAFA,QAAQ,IAAI,uBAAwB,CAAC,CAACA,CAAY,EAE9C,CAACA,EACE,MAAA,IAAI,MAAM,4CAA4C,EAG7D,MAAMU,EAAc,CACnB,KAAAD,EACA,aAAcJ,EACd,cAAeL,CAAA,EAGVW,EAAgB,GAAGzB,EAAqB,eAAe,SAAS,kBAE9D,QAAA,IAAI,sBAAuBwB,CAAW,EACtC,QAAA,IAAI,kBAAmBC,CAAa,EAEtC,MAAAC,EAAW,MAAM,MAAMD,EAAe,CAC3C,OAAQ,OACR,QAAS,CACR,eAAgB,kBACjB,EACA,KAAM,KAAK,UAAUD,CAAW,CAAA,CAChC,EAIG,GAFI,QAAA,IAAI,yBAA0BE,EAAS,MAAM,EAEjD,CAACA,EAAS,GAAI,CACX,MAAAC,EAAY,MAAMD,EAAS,KAAK,EAAE,MAAM,KAAO,CAAE,MAAO,eAAkB,EAAA,EACxE,cAAA,MAAM,8BAA+BC,CAAS,EAChD,IAAI,MAAM,0BAA0BD,EAAS,MAAM,MAAMC,EAAU,OAAS,eAAe,EAAE,CACpG,CAEM,MAAAnB,EAAO,MAAMkB,EAAS,OAC5B,eAAQ,IAAI,qCAAqC,EAGjD,eAAe,WAAW,0BAA0B,EACpD,eAAe,WAAW,kBAAkB,EAErClB,EAAK,YACb,CAKA,eAAsBoB,EAAkBC,EAAmC,CACtE,GAAA,CAMH,GALA,QAAQ,IAAI,wCAAwC,EACpD,QAAQ,IAAI,gBAAiBA,EAAc,MAAQ,IAAI,EAInD,EAFgB,OAAO,SAAS,WAAa,aAE/B,CAEX,MAAAH,EAAW,MAAM,MAAM,qDAAsD,CAClF,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,UAAU,CAAE,aAAcG,EAAa,CAAA,CAClD,EAEG,GAAA,CAACH,EAAS,GAAI,CACX,MAAAI,EAAY,MAAMJ,EAAS,OACzB,cAAA,MAAM,8BAA+BI,CAAS,EAChD,IAAI,MAAM,yBAAyBJ,EAAS,MAAM,MAAMI,CAAS,EAAE,CAC1E,CAEM,MAAAC,EAAW,MAAML,EAAS,OACxB,eAAA,IAAI,2CAA4CK,CAAQ,EACzDA,CACR,CAIA,MAAMC,EAAY,CACjB,uCACA,GAAGhC,EAAqB,eAAe,QAAQ,QAC/C,+BACA,kCACA,iCAAA,EAGD,IAAIiC,EAA0B,KAE9B,UAAWC,KAAYF,EAClB,GAAA,CACK,QAAA,IAAI,uBAAwBE,CAAQ,EAEtC,MAAAR,EAAW,MAAM,MAAMQ,EAAU,CACtC,QAAS,CACR,cAAiB,UAAUL,CAAW,GACtC,OAAU,mBACV,eAAgB,kBACjB,CAAA,CACA,EAKG,GAHJ,QAAQ,IAAI,2BAA2BK,CAAQ,IAAKR,EAAS,MAAM,EAC3D,QAAA,IAAI,wBAAyB,OAAO,YAAYA,EAAS,QAAQ,QAAS,CAAA,CAAC,EAE/E,CAACA,EAAS,GAAI,CACX,MAAAI,EAAY,MAAMJ,EAAS,OACjC,QAAQ,MAAM,2BAA2BQ,CAAQ,IAAKJ,CAAS,EAC/DG,EAAY,IAAI,MAAM,uBAAuBP,EAAS,MAAM,MAAMI,CAAS,EAAE,EAC7E,QACD,CAGA,MAAMK,EAAcT,EAAS,QAAQ,IAAI,cAAc,EAGvD,GAFQ,QAAA,IAAI,yBAA0BS,CAAW,EAE7C,CAACA,GAAe,CAACA,EAAY,SAAS,kBAAkB,EAAG,CACxD,MAAAC,EAAe,MAAMV,EAAS,OAC5B,QAAA,MAAM,0BAA0BQ,CAAQ,IAAKE,EAAa,UAAU,EAAG,GAAG,CAAC,EACvEH,EAAA,IAAI,MAAM,mCAAmCE,CAAW,eAAeC,EAAa,UAAU,EAAG,GAAG,CAAC,EAAE,EACnH,QACD,CAEM,MAAAL,EAAW,MAAML,EAAS,OAI5B,GAHJ,QAAQ,IAAI,0BAA2BQ,EAAU,IAAKH,CAAQ,EAG1DG,EAAS,SAAS,8BAA8B,GAE/CH,EAAS,MAAQ,MAAM,QAAQA,EAAS,IAAI,GAAKA,EAAS,KAAK,OAAS,EAAG,CACxE,MAAAM,EAAON,EAAS,KAAK,CAAC,EACpB,QAAA,IAAI,mCAAoCM,EAAK,IAAI,EAGzD,IAAIC,EAAa,KACb,GAAA,CACH,MAAMC,EAAkB,MAAM,MAAM,oCAAoCF,EAAK,IAAI,GAAI,CACpF,QAAS,CACR,OAAU,mBACV,eAAgB,kBACjB,CAAA,CACA,EAEGE,EAAgB,KAEnBD,GADoB,MAAMC,EAAgB,QACjB,UAAU,GAC3B,QAAA,IAAI,qBAAsBD,CAAU,SAErCE,EAAO,CACP,QAAA,KAAK,6BAA8BA,CAAK,CACjD,CAGO,MAAA,CACN,GAAIH,EAAK,QACT,SAAUA,EAAK,KACf,MAAOA,EAAK,MACZ,gBAAiBA,EAAK,gBACtB,SAAU,CAAE,GAAIC,CAAW,CAAA,CAE7B,CAGM,OAAAP,QAECS,EAAO,CACf,QAAQ,MAAM,uBAAuBN,CAAQ,IAAKM,CAAK,EACvDP,EAAYO,aAAiB,MAAQA,EAAQ,IAAI,MAAM,OAAOA,CAAK,CAAC,EACpE,QACD,CAIK,MAAAP,GAAa,IAAI,MAAM,0BAA0B,QAE/CO,EAAO,CACP,cAAA,MAAM,6BAA8BA,CAAK,EAC3CA,CACP,CACD"}